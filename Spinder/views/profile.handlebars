<div class="button-div">
    <button onclick="OpenForm();" id="edit-button">Edit Profile</button>
</div>
<div class="button-div">
    <button id ="cancel-button" style="display: none" onclick="CloseForm();">Cancel</button>
</div>
<form id="edit-profile-form"action="/users/{{user._id}}" method="POST" style="display: none">
    <div class="form-row">
        <div class="form-group col-md-6">
            <label>First Name</label>
            <input name = "firstName" placeholder="Update First Name" class="form-control" minlength="1" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$"/>
        </div>
        <div class="form-group col-md-6">
            <label>Last Name</label>
            <input name = "lastName" placeholder="Update Last Name" class="form-control"  minlength="1" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$"/>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6">
            <label>Country</label>
            <select name="country" class="form-select" id="country"></select>
        </div>
        <div class="form-group col-md-6">
            <label>City</label>
            <input name = "city" placeholder="Update City" class="form-control" minlength="1" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$"/>
        </div>
    </div>
    <div class="form-group">
            <label>Bio</label>
            <textarea name = "bio" placeholder="Update Bio" class="form-control" form="edit-profile-form" rows="3"></textarea>
        </div>  
    <button type="submit">Submit</button>
</form>
{{#unless user.access_token}}
<form action="/spotify/login" onload="CheckConnected()" id="spotify-connect">
    <input type="submit" value="Connect to Spotify." />
</form>
{{/unless}}
<div class="row row-cols-1 row-cols-md-4">
    <div class="col mb-4">
        <div class="card text-center border-secondary mb-3" style="width: 18rem;">
            <div class="card-header">
                <img src="{{user.img}}" id="user-img" class="card-img-top">
            </div>  
            <h1>{{user.username}}</h1>
            <div class="gray-div">
                <h3>{{user.firstName}} {{user.lastName}}</h3>
                <h4>{{user.location.city}}, {{user.location.country}}</h4>
            </div>
            <div class="card-body">
                <p>{{user.bio}}</p>
            </div>
        </div>
    </div>
    <div class="col mb-4">
        <div class="card text-center border-secondary mb-3" style="width: 18rem;">
            <div class="card-body">
                <p class="bolded-text">Top Artists</p>
                    <ol class="list-group list-group-flush">
                        {{#each topArtists}}
                            <img src="{{this.img}}" class="card-img-top">
                            <li class="list-group-item"><a href="{{this.spotify_url}}">{{this.name}}</a></li>
                        {{/each}}
                    </ol>
            </div>
        </div>
    </div>
    <div class="col mb-4">
        <div class="card text-center border-secondary mb-3" style="width: 18rem;">
            <div class="card-body">
                <p class="bolded-text">Top Songs</p>
                <ol class="list-group list-group-flush">
                    {{#each topSongs}}
                        <img src="{{this.img}}" class="card-img-top">
                        <li class="list-group-item"><a href="{{this.spotify_url}}">{{this.name}}</a></li>
                    {{/each}}
                </ol>
            </div>
        </div>
    </div>
    <div class="col mb-4">
        <div class="card text-center border-secondary mb-3" style="width: 18rem;">
            <div class="card-body">
                <p class="bolded-text">Top Playlists</p>
                <ol class="list-group list-group-flush">
                    {{#each playlists}}
                        <img src="{{this.img}}" class="card-img-top">
                        <li class="list-group-item"><a href="{{this.spotify_url}}">{{this.name}}</a></li>
                    {{/each}}
                </ol>
            </div>
        </div>
    </div>
    
</div>
<script src="../public/profile.js"></script>
<script src="../public/js/forms.js"></script>

